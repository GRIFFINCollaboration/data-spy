<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Data Spy Testing</title>
        <link rel="stylesheet" href="../css/qunit.css">
    </head>
    <body>
        <div id="qunit"></div>
        <div id="qunit-fixture"></div>
        <script src="../scripts/qunit.js"></script>
        <script src='../scripts/parse.js' type="text/javascript"></script>

        <script>
            //////////////////////////////////////////////////////
            // GRIFFIN parser testing
            //////////////////////////////////////////////////////

            QUnit.module('core GRIFFIN parser', {
                "setup": function(){
                    parser = new GRIFFINparser;
                    data = [
                        0x88B67C80
                    ];
                },

                "teardown": function(){
                    return 0;
                }
            });
            
            QUnit.test( "typeI", function( assert ) {
                unpacked = {}
                parser.parsers[1](data[0], unpacked)

                assert.equal(unpacked.packetType, 8, 'type I words always begin with packet type == 0x8.');
                assert.equal(unpacked.pileUpType, '3 hits', '0x88B67C80 has three hits piled up.');
                assert.equal(unpacked.dataType, 'GRIF-16', '0x88B67C80 is from a GRIF-16.');
                assert.equal(unpacked.numFilterPatterns, 3, '0x88B67C80 has three filter words.');
                assert.equal(unpacked.masterChan, 6, '0x88B67C80 is on master channel 8.');
                assert.equal(unpacked.slaveChan, 7, '0x88B67C80 is on slave channel 7.');
                assert.equal(unpacked.collectorChan, 200, '0x88B67C80 is on collector channel 200.');
                assert.equal(unpacked.detType, 'HPGe Low Gain', '0x88B67C80 is from a low gain HPGe detector.')
            });

            

        </script>
      </body>
</html>